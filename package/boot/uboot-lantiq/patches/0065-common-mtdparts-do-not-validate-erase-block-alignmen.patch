From ff16fff0ec7e809cf591e680512d9dd1ca8ac27b Mon Sep 17 00:00:00 2001
From: Daniel Schwierzeck <daniel.schwierzeck@gmail.com>
Date: Tue, 3 Jan 2017 00:25:16 +0100
Subject: [PATCH 065/158] common: mtdparts: do not validate erase block
 alignment on read-only partitions

Signed-off-by: Daniel Schwierzeck <daniel.schwierzeck@gmail.com>
---
 common/cmd_mtdparts.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/common/cmd_mtdparts.c b/common/cmd_mtdparts.c
index 40b6333ebf..06b631d002 100644
--- a/common/cmd_mtdparts.c
+++ b/common/cmd_mtdparts.c
@@ -418,7 +418,10 @@ static int part_validate(struct mtdids *id, struct part_info *part)
 	 * Now we need to check if the partition starts and ends on
 	 * sector (eraseblock) regions
 	 */
-	return part_validate_eraseblock(id, part);
+	if (part->mask_flags & MTD_WRITEABLE)
+		return part_validate_eraseblock(id, part);
+	else
+		return 0;
 }
 
 /**
-- 
2.11.0

